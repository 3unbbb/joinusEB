<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="com.joinus.mapper.RentalMapper">
	
	<!-- 대관상세 -->
	<select id="getPlaceContent" resultType="PartnerPlacesVo">
		select * from partner_places
		where partner_place_no = #{partner_place_no}
	</select>
	
	<!-- 제휴시설 리스트 -->
	<select id="getAllPartnerPlaceList" resultType="PartnerPlacesVo">
		select * from partner_places
	</select>


	<!-- 결제 -->
	<insert id="pay">
		insert into payments(reservation_no,member_no,partner_place_no,partner_place_price,payment_price,payment_status)
		 values(#{reservation_no},#{member_no},#{partner_place_no},#{partner_place_price},#{payment_price},#{payment_status})
		 <selectKey resultType="Integer" keyProperty="payment_no" order="AFTER">
		SELECT LAST_INSERT_ID()
		</selectKey>
	</insert>

	<insert id="place">
		insert into rental_places(reservation_no,club_no,member_no,partner_place_no,payment_no,rental_time_no,rental_status)
		values(#{reservation_no},#{club_no},#{member_no},#{partner_place_no},#{payment_no},#{rental_time_no},#{rental_status})
	</insert>

</mapper>  